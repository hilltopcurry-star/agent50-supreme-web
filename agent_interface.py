"""
AGENT 50 - FILE MANAGEMENT INTERFACE
Agent50 Ú©Û’ Ù„ÛŒÛ’ Ù…Ø±Ú©Ø²ÛŒ ÙØ§Ø¦Ù„ Ù„Ú©Ú¾Ù†Û’ Ú©Ø§ Ø³Ø³Ù¹Ù…
"""

from pathlib import Path
from auto_save_system import save_file, list_project_files

class AgentFileClient:
    """Agent50 ÙØ§Ø¦Ù„ Ù„Ú©Ú¾Ù†Û’ Ú©Ø§ Ù…Ø±Ú©Ø²ÛŒ Ø§Ù†Ù¹Ø±ÙÛŒØ³"""

    def __init__(self, project_name: str):
        self.project = project_name

    def write(self, relative_path: str, content: str, encoding: str = "utf-8"):
        """Ú©Ø³ÛŒ Ø¨Ú¾ÛŒ ÙØ§Ø¦Ù„ Ú©Ùˆ Ø³ÛŒÙˆ Ú©Ø±ÛŒÚº: projects/<project_name>/<relative_path>"""
        return save_file(self.project, relative_path, content, encoding)

    def list(self):
        """Ù¾Ø±ÙˆØ¬ÛŒÚ©Ù¹ Ú©ÛŒ ØªÙ…Ø§Ù… ÙØ§Ø¦Ù„ÛŒÚº Ø¯Ú©Ú¾Ø§Ø¦ÛŒÚº"""
        return list_project_files(self.project)
    
    def create_backend_structure(self):
        """Ø®ÙˆØ¯ Ø¨Ø®ÙˆØ¯ backend ÚˆÚ¾Ø§Ù†Ú†Û Ø¨Ù†Ø§Ø¦ÛŒÚº"""
        structures = {
            "backend/app.py": "# Main Flask Application",
            "backend/models.py": "# Database Models", 
            "backend/routes.py": "# API Routes",
            "backend/config.py": "# Configuration",
            "backend/requirements.txt": "# Python Dependencies",
            "frontend/index.html": "<!DOCTYPE html>\n<html>\n<head>\n    <title>Agent50 App</title>\n</head>\n<body>\n    <h1>AGENT 50 Generated App</h1>\n</body>\n</html>",
            "README.md": "# AGENT 50 Project\n\nThis project was automatically generated by Agent50 - Super King DeepSeek"
        }
        
        results = []
        for path, content in structures.items():
            result = self.write(path, content)
            results.append(result)
        
        return results

# Global instance for Agent50
agent50_client = AgentFileClient("agent50")

def quick_test():
    """ÙÙˆØ±ÛŒ Ù¹ÛŒØ³Ù¹ Ú©Û’ Ù„ÛŒÛ’"""
    print("ğŸ§ª Testing Agent50 File Interface...")
    
    # Ù¹ÛŒØ³Ù¹ ÙØ§Ø¦Ù„ Ù„Ú©Ú¾ÛŒÚº
    result = agent50_client.write("test/test_file.py", "# Test file created by Agent50\nprint('Hello from Agent50!')")
    print(f"âœ… File saved: {result}")
    
    # ÙÛØ±Ø³Øª Ø¯ÛŒÚ©Ú¾ÛŒÚº
    files = agent50_client.list()
    print(f"ğŸ“ Project files: {files}")
    
    return True

if __name__ == "__main__":
    quick_test()